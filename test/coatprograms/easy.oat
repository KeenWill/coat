void receiver(chan<int, *, 0> c) {
  while (true) {
    var i = recvchan(c);
  }
}

void sender(chan<int, 0, 1> c, int x) {
  var res = sendchan(c, x);
}

int program(int argc, string[] argv) {
  var channel = makechan<int,*,*>();
  var thread_group = spawn([receiver, sender, sender], [(channel), (channel, 1), (channel, 2)]);
  var res = join(thread_group);
}
